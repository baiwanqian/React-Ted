<!DOCTYPE html>
<html>

<head>
  <title> REACT </title>

  <style>
    body {
      background-color: #94a2af;
      font-family: Verdana;

      display: flex;
      flex-direction: column;
    }

    #headCont {
      position: sticky;
      top: 0;

      padding: 15px;

      background-color: slategrey;
      color: #eaeaea;

      font-style: italic;
      font-size: 130%;
    }

    #introCont {
      margin: 50px 25px 25px 25px;
      padding: 20px;

      background-color: #eaeaea;
      border-radius: 10px;

      width: 70%;
      font-size: 120%;

      margin-bottom: 2.5em;
    }

    #vdom {
      padding: 30px;

      background-color: #8d9aa6;
      color: #eaeaea;
      margin-bottom: 2.5em;
    }

    .heading {
      text-align: center;

      font-size: 170%;
    }

    .heading2 {
      text-align: center;

      font-size: 250%;
    }

    .headBtn {
      border-width: thin;
      border-style: solid;
      border-color: #eaeaea;
      border-radius: 5px;

      padding: 3px 6px 3px 6px;
      font-style: normal;
    }

    ul:not(.text-left) {
      font-size: 125%;
      width: 90%;
    }

    .arrow {
      font-size: 400%;
    }

    .demoWrap {
      margin: 25px auto;
      padding: 20px;
      background-color: #eaeaea;
      border-radius: 10px;
      font-size: 120%;
      margin-bottom: 2.5em;
      width: 100%;
      max-width: 800px;
    }

    #demoArea {
      position: relative;
      width: 100%;
      height: 55vh;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      overflow: hidden;
    }

    .popBtn {
      position: absolute;
      border: none;
      border-radius: 999px;
      padding: 10px 15px;
      cursor: pointer;
      background: slategrey;
      font-weight: 700;
      color: #eaeaea;
    }

    #openSound {
      position: sticky;
      bottom: 7px;
      left: 96vw;

      width: 20px;

      font-size: 200%;
    }

    #openSound:hover {
      color: #f3f3f3;
    }

    #soundboard {
      position: fixed;
      bottom: 13px;
      left: 68.5vw;

      width: 30vw;
      height: 48vh;
      background-color: white;

      border-style: solid;
      border-width: medium;
      border-color: darkgrey;
    }

    #close {
      margin-top: 10px;
      margin-left: 95%;
      font-size: 180%;

      color: darkgrey
    }

    #close:hover {
      color: black;
    }

    .aud:hover {
      filter: brightness(0.8);
    }

  </style>
</head>

<body>
  <audio id="clap" src="https://image2url.com/r2/default/audio/1770259312345-81dc89e1-7fd2-4a14-b534-38ca0836c05f.mp3"> </audio>
  <audio id="boing" src="https://image2url.com/r2/default/audio/1770259580622-ae8ee47c-a629-4909-bf3a-a581153676cb.mp3"> </audio>
  <audio id="laugh" src="https://image2url.com/r2/default/audio/1770259749676-0d5b4c35-5892-4cf9-b854-e27f2932c842.mp3"> </audio>
  <audio id="gameover" src="https://image2url.com/r2/default/audio/1770260064026-f3fb8833-072d-4bd1-948f-15c1ee5ac7f0.mp3"> </audio>
  <audio id="boo" src="https://image2url.com/r2/default/audio/1770260083654-c7674553-d136-4dd1-bda9-1471a6134678.mp3"> </audio>

  <div id="1"> </div>
  <div id="headCont" class=""> </div>
  <div id="introCont" class="self-center"> </div>
  <div id="vdom"> </div>
  <div id = "btnDemo" class = "demoWrap"> </div>
  <div id = "todoDemo" class = "demoWrap"> </div>

  <button id="openSound" onClick="reveal()"> ^ </button>
  <div id="soundboard" class="rounded-2xl hidden px-5">
    <button id="close" onClick="hide()"> X </button>
    <div class="bg-[gainsboro] grid grid-cols-3 p-2 mt-2 rounded-2xl text-3xl" style="gap: 40px">
      <div class="aud bg-white rounded-xl border-solid border-7 border-[#a3a3a3]">
        <button onClick="play('clap')" class="w-full h-full" style="aspect-ratio:1/1"> &#x1F44F; </button>
      </div>
      <div class="aud bg-white rounded-xl border-solid border-7 border-[#a3a3a3]">
        <button onClick="play('boing')" class="w-full h-full" style="aspect-ratio:1/1"> &#x1F388; </button>
      </div>
      <div class="aud bg-white rounded-xl border-solid border-7 border-[#a3a3a3]">
        <button onClick="play('laugh')" class="w-full h-full" style="aspect-ratio:1/1"> &#x1F604; </button>
      </div>
      <div class="aud bg-white rounded-xl border-solid border-7 border-[#a3a3a3]">
        <button onClick="play('gameover')" class="w-full h-full" style="aspect-ratio:1/1"> &#x1F47E; </button>
      </div>
      <div class="aud bg-white rounded-xl border-solid border-7 border-[#a3a3a3]">
        <button onClick="play('boo')" class="w-full h-full" style="aspect-ratio:1/1"> &#x1F44E; </button>
      </div>
    </div>
  </div>

  <!-- TAILWIND -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <!-- IMPORTING REACT AND REACTDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- GETTING BABEL SO COMPUTER CAN READ THE JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- INLINE REACT CODE (would be in another file but this way it can run in browser) -->
  <script type="text/babel">
    function Head() {
      return(
        <div id="head" className="flex items-center justify-between">
          <p> a guide on reacting </p>

          <div className="flex gap-3">
            <a className="headBtn" href="#content2"> content2 </a>
            <a className="headBtn" href="#1"> UP </a>
          </div>
        </div>
      )
    }

    function Intro() {
      return(
        <div className="flex flex-col justify-center self-center">
          <h3 className="heading"> &#x2728; What is React?	&#x2728; <br /> </h3>
          <hr />
          <p className="text-[#eaeaea]"> \ </p>

          <ul className="list-disc pl-6 list-inside self-center">
            <li className="pb-2"> A JS library for building user interfaces/interactive webpages created by Jordan Walke </li>
            <li className="pb-2"> More efficiently updates the browser DOM in response to user interactions by changing only what <em>needs</em> to be changed </li>
            <li className="pb-2"> Utilizes a <u>Virtual DOM</u>, a more lightweight copy of the browser DOM that lives within the memory </li>
          </ul>
        </div>
      )
    }

    function VDom() {
      return(
        <div className="flex flex-col justify-center">
          <h3 className="heading2"> <em>The Virtual DOM</em> </h3>
          <p className="text-[#8d9aa6]"> / </p> <p className="text-[#8d9aa6]"> / </p>
          <div className="flex flex-col gap-5 justify-center items-center self-center w-4/5">
            <div className="flex flex-row gap-5 justify-center items-center w-full">
              <div className="flex flex-col w-3/7">
                <div className="flex flex-col justify-center w-full rounded-xl overflow-hidden bg-[#eaeaea] h-[450px]">
                  <div className="px-6 py-4">
                    <div className="text-gray-700 font-bold text-xl mb-2 text-center"> Initial Render </div>
                    <p className="text-gray-700 text-base text-center">
                      A Virtual DOM tree reflective of the Browser DOM is constructed
                    </p>
                  </div>
                </div>
                <div>
                  <p className="arrow text-[#8d9aa6]"> &#x2193; </p>
                </div>
              </div>
              <div className="flex flex-col w-1/7">
                <p className="arrow text-center"> &#x2192; </p>
                <p className="arrow text-center text-[#8d9aa6]"> &#x2192; </p>
              </div>
              <div className="flex flex-col w-3/7">
                <div className="flex flex-col justify-center w-full rounded-xl overflow-hidden bg-[#eaeaea] h-[450px]">
                  <div className="px-6 py-4">
                    <div className="text-gray-700 font-bold text-xl mb-2 text-center"> Interaction </div>
                    <p className="text-gray-700 text-base text-center">
                      User interactions are handled through the usage of React&apos;s event handlers such as OnClick and OnSubmit
                      <div className="text-[#eaeaea] text-xs"> &nbsp </div>
                      <div className="rounded-xl p-1 bg-[#d3d3d3]">
                        &lt;element onEvent=&#123;handlerFunction&#125; /&gt;
                      </div>
                    </p>
                  </div>
                </div>
                <div>
                  <p className="arrow text-center"> &#x2193; </p>
                </div>
              </div>
            </div>
            <div className="flex flex-row gap-5 justify-center items-center w-full ">
              <div className="flex flex-col w-3/7">
                <div className="flex flex-col justify-center w-full rounded-xl overflow-hidden bg-[#eaeaea] h-[450px]">
                  <div className="px-6 py-4">
                    <div className="text-gray-700 font-bold text-xl mb-2 text-center"> Rerender </div>
                    <p className="text-gray-700 text-base text-center">
                      A new Virtual DOM tree is constructed to reflect set changes caused by user interaction
                    </p>
                  </div>
                </div>
                <div>
                  <p className="arrow text-center"> &#x2193; </p>
                </div>
              </div>
              <div className="flex flex-col w-1/7">
                <p className="arrow text-center"> &#x2190; </p>
                <p className="arrow text-center text-[#8d9aa6]"> &#x2192; </p>
              </div>
              <div className="flex flex-col w-3/7">
                <div className="flex flex-col justify-center w-full rounded-xl overflow-hidden bg-[#eaeaea] h-[450px]">
                  <div className="px-6 py-4">
                    <div className="text-gray-700 font-bold text-xl mb-2 text-center"> Diffing </div>
                    <p className="text-gray-700 text-base text-center">
                      Diffing is a process of linear time (O(n)) in which the newly created Virtual DOM is compared to its predecessor align
                      (comparing on a node basis).
                      <ul className="list-disc pl-6 list-inside text-left">
                        <li className="pb-2">
                        When a DOM element of <b>different types</b> are detected during this process, the old subtree is
                        removed and completely rebuilt to reflect this change
                        </li>
                        <li>
                          When a DOM element of the <b>same type</b> is detected, only the modified properties will be
                          altered (unaltered properties maintain its current state)
                        </li>
                      </ul>
                    </p>
                  </div>
                </div>
                <div>
                  <p className="arrow text-[#8d9aa6]"> &#x2193; </p>
                </div>
              </div>
            </div>
            <div className="flex flex-row gap-5 w-full">
              <div className="flex flex-col justify-center w-3/7 rounded-xl overflow-hidden bg-[#eaeaea] h-[450px]">
                <div className="px-6 py-4">
                  <div className="text-gray-700 font-bold text-xl mb-2 text-center"> DOM Update </div>
                  <p className="text-gray-700 text-base text-center">
                    After the differences are identified and a set of changes are identified (otherwise known as a patch),
                    these changes are applied to the browser DOM. Multiple updates are executed in a single DOM update, further reducing
                    the number of actual DOM manipulations
                  </p>
                </div>
              </div>
              <p className="arrow text-center text-[#8d9aa6] w-1/7"> &#x2192; </p>
              <div className="w-3/7 flex justify-center items-center">
                <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWw3aDlrYTI3ZTcxbG9xY3l5emF1Z3NlN2JxMGpvZXdwd2ZyeTB2eSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/QlQdLBS70XJcZY1fLF/giphy.gif" />
              </div>
            </div>
          </div>
        </div>
      )
    }

    function BtnDemo() {
      const [playing, setPlaying] = React.useState(false);
      const [score, setScore] = React.useState(0);
      const [misses, setMisses] = React.useState(0);
      const [btns, setBtns] = React.useState([]);

      const nextBtn = React.useRef(1);
      const spawnT = React.useRef(null);
      const rmvT = React.useRef(null);
      const spawn = Math.max(900 - score * 15, 500);
      const rmv = Math.max(1400 - score * 20, 600);

      function startGame() {
        setPlaying(true);
        setScore(0);
        setMisses(0);
        setBtns([]);
        nextBtn.current = 1;
      }

      function resetGame() {
        setPlaying(false);
        setScore(0);
        setMisses(0);
        setBtns([]);
        clearInterval(spawnT.current);
        clearInterval(rmvT.current);
      }

      React.useEffect(() => {
        if (!playing) return;
        clearInterval(spawnT.current);

        spawnT.current = setInterval(() => {
          setBtns(prev => [...prev,
            {
              id: nextBtn.current++,
              initial: Date.now(),
              length: rmv
            }
          ]);
        }, spawn);

        return() => clearInterval(spawnT.current);
      }, [playing, spawn, rmv]);

      React.useEffect(() => {
        if (!playing) return;
        clearInterval(rmvT.current);

        rmvT.current = setInterval(() => {

          setBtns(prev => {
            let expired = 0;
            const rem = [];
            for (const b of prev) {
              if (Date.now() - b.initial > b.length) {
                expired++;
              } else {
                rem.push(b);
              }
            }
            if (expired > 0) setMisses(m => m + expired);
            return rem;
          });

        }, 60);

        return () => clearInterval(rmvT.current);
      }, [playing]);

      React.useEffect(() => {
        if (misses >= 3) {
          setPlaying(false);
          clearInterval(spawnT.current);
          clearInterval(rmvT.current);
        }
      }, [misses]);

      return (
        <div className = "flex flex-col items-center text-center">

          <h3 className = "heading2"> Button Game Demo </h3>

          <p className = "mb-2">
            <b>Score:</b> {score} &nbsp; | &nbsp; <b>Misses:</b> {Math.min(misses, 3)}/3
          </p>

          <div className = "flex gap-3 mb-3">
            {!playing && misses < 3 && (
              <button className = "px-4 py-2 rounded-lg bg-slate-500 text-white font-semibold
                hover:bg-slate-700 active:scale-95 transition" onClick = {startGame}> Start </button>
            )}
            <button className = "px-4 py-2 rounded-lg bg-slate-500 text-white font-semibold
              hover:bg-slate-700 active:scale-95 transition" onClick = {resetGame}> Reset </button>
          </div>

          <div id= "demoArea">
            {btns.map(b => (
              <button key = {b.id} className= "popBtn"
                onClick = {() => {
                  if (!playing) return;
                  setBtns(prev => prev.filter(x => x.id !== b.id));
                  setScore(s => s + 1);
                }}
                style = {{ left: (b.id * 37) % 400, top: (b.id * 61) % 250 }}
              > CLICK </button>
            ))}
          </div>

          {!playing && misses >= 3 && <p className = "mt-3 font-bold"> GAME OVER </p>}
        </div>
      );

    }

    function TodoDemo() {
      const [items, setItems] = React.useState([]);
      const [text, setText] = React.useState("");
      const nextId = React.useRef(1);

      function add() {
        const t = text.trim();
        if (!t) return;
        setItems(prev => [...prev,
          { id: nextId.current++,
            label: t
          }
        ]);
        setText("");
      }

      function rmv(id) {
        setItems(prev => prev.filter(x => x.id != id));
      }

      function move(id, dir) {
        setItems(prev => {
          const i = prev.findIndex(x => x.id == id);
          const j = i + dir;
          if (i < 0 || j < 0 || j >= prev.length) return prev;
          const copy = [...prev];
          const tmp = copy[i];
          copy[i] = copy[j];
          copy[j] = tmp;
          return copy;
        });
      }

      return (
        <div className = "flex flex-col items-center text-center gap-3">
          <h3 className = "heading2"> To-Do List Demo </h3>

          <div className = "flex gap-2 w-full">
            <input
              className = "flex-1 px-3 py-2 rounded-lg border border-slate-300"
              value = {text}
              onChange = {e => setText(e.target.value)}
              placeholder = "Add a task…"
              onKeyDown = {e => {
                if (e.key === "Enter") add();
              }}
            />

            <button className="px-4 py-2 rounded-lg bg-slate-500 text-white font-semibold hover:bg-slate-700 active:scale-95 transition"
              onClick={add}> Add </button>
            <button className="px-4 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 active:scale-95 transition"
              onClick={() => setItems([])}> Clear </button>
          </div>

          <ul className = "flex flex-col gap-2 w-full">
            {items.length == 0 && (
              <li className = "text-slate-600 italic"> No tasks yet.</li>
            )}

            {items.map((it, i) => (
              <li key={it.id} className="flex items-center justify-between bg-white rounded-lg px-3 py-2">
                <span className="text-left">
                  <b className="text-slate-500">{i + 1}.</b> {it.label}
                </span>

                <div className="flex gap-2">
                  <button
                    className="px-2 py-1 rounded bg-slate-200 hover:bg-slate-300 transition"
                    onClick={() => move(it.id, -1)} title="Move up"
                  > ↑ </button>
                  <button
                    className="px-2 py-1 rounded bg-slate-200 hover:bg-slate-300 transition"
                    onClick={() => move(it.id, +1)} title="Move down"
                  > ↓	</button>
                  <button
                    className="px-2 py-1 rounded bg-red-500 text-white hover:bg-red-600 transition"
                    onClick={() => rmv(it.id)} title="Delete"
                  > ✕ </button>
                </div>
              </li>
            ))}
          </ul>

        </div>
      );
    }

    const headCont = ReactDOM.createRoot(document.getElementById('headCont'));
    headCont.render(<Head />);

    const introCont = ReactDOM.createRoot(document.getElementById('introCont'));
    introCont.render(<Intro />);

    const vdom = ReactDOM.createRoot(document.getElementById('vdom'));
    vdom.render(<VDom />);

    const btnDemo = ReactDOM.createRoot(document.getElementById('btnDemo'));
    btnDemo.render(<BtnDemo />);

    const todoDemo = ReactDOM.createRoot(document.getElementById('todoDemo'));
    todoDemo.render(<TodoDemo />);

    // NORMAL JS STUFF
    function reveal() {
      document.getElementById('openSound').classList.add('hidden');
      document.getElementById('soundboard').classList.remove('hidden');
    }

    function hide() {
      document.getElementById('soundboard').classList.add('hidden');
      document.getElementById('openSound').classList.remove('hidden');
    }

    function play(sound) {
      document.querySelectorAll('audio').forEach(aud => {
        if (aud.currentTime > 0) {
          aud.pause();
          aud.currentTime = 0;
        }
      });
      document.getElementById(sound).play();
    }

  </script>
</body>

</html>
